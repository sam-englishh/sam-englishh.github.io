{
  "hash": "d105339f702b80870f08355456248d32",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"MiniProject4.qmd\"\nauthor: \"Sam English\"\ndate: 11/26/2024\nexecute: \n  warning: false\n  message: false\n---\n\n\nIn this analysis, I aim to explore the Wideband Acoustic Immittance (WAI) database by recreating a plot of mean absorbance versus frequency for studies in the database. First, I will extract the data needed to recreate a plot similar to the one in Voss, including mean absorbance for each study, the number of unique ears, and the instruments used. Then, I will identify a study with participants from diverse demographic groups (e.g., males and females) and analyze differences in mean absorbance between these groups. This will involve grouping the data by study, demographic groups, and frequency and visualizing the trends.\n\nThe data used in this analysis was obtained from the [Wideband Acoustic Immittance (WAI) Database](https://pmc.ncbi.nlm.nih.gov/articles/PMC7093226/figure/F1/) hosted by Smith College. The WAI database compiles published WAI measurements, which serve as noninvasive auditory diagnostic tools. These measurements include data from various peer-reviewed studies, and details about the database are available in the publication by Voss et al. (2019).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(RMariaDB)\ncon_wai <- dbConnect(\n  MariaDB(), host = \"scidb.smith.edu\",\n  user = \"waiuser\", password = \"smith_waiDB\", \n  dbname = \"wai\"\n)\nMeasurements <- tbl(con_wai, \"Measurements\")\nPI_Info <- tbl(con_wai, \"PI_Info\")\nSubjects <- tbl(con_wai, \"Subjects\")\n\nMeasurements\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# Source:   table<`Measurements`> [?? x 16]\n# Database: mysql  [waiuser@scidb.smith.edu:3306/wai]\n   Identifier SubjectNumber Session Ear   Instrument   Age AgeCategory EarStatus\n   <chr>              <int>   <int> <chr> <chr>      <dbl> <chr>       <chr>    \n 1 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n 2 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n 3 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n 4 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n 5 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n 6 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n 7 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n 8 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n 9 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n10 Abur_2014              1       1 Left  HearID        20 Adult       Normal   \n# ℹ more rows\n# ℹ 8 more variables: TPP <dbl>, AreaCanal <dbl>, PressureCanal <dbl>,\n#   SweepDirection <chr>, Frequency <dbl>, Absorbance <dbl>, Zmag <dbl>,\n#   Zang <dbl>\n```\n\n\n:::\n\n```{.r .cell-code}\nPI_Info\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# Source:   table<`PI_Info`> [?? x 12]\n# Database: mysql  [waiuser@scidb.smith.edu:3306/wai]\n   Identifier    Year Authors      AuthorsShortList Title Journal URL   Abstract\n   <chr>        <int> <chr>        <chr>            <chr> <chr>   <chr> <chr>   \n 1 Abur_2014     2014 Defne Abur,… Abur et al.      Inst… J Am A… http… \"\\\"<p> …\n 2 Aithal_2013   2013 Sreedevi Ai… Aithal et al.    Norm… Int. J… http… \"<p> <s…\n 3 Aithal_2014   2014 Sreedevi Ai… Aithal et al.    Wide… J Am A… http… \"<p> <s…\n 4 Aithal_2014b  2014 Sreedevi Ai… Aithal et al.    Wide… J Am A… http… \"<p> <s…\n 5 Aithal_2015   2015 Sreedevi Ai… Aithal et al.    Wide… Ear He… http… \"<p> <s…\n 6 Aithal_2017a  2017 Sreedevi Ai… Aithal et al.    Norm… J Spee… http… \"<p> <s…\n 7 Aithal_2017b  2017 Sreedevi Ai… Aithal et al.    Effe… Int J … http… \"<p> <s…\n 8 Aithal_2019a  2019 Sreedevi Ai… Aithal et al.    Eust… J Am A… http… \"<p> <s…\n 9 Aithal_2019b  2019 Sreedevi Ai… Aithal et al.    Effe… J Spee… http… \"Object…\n10 Aithal_2020a  2020 Sreedevi Ai… Aithal et al.    Pred… J Am A… http… \"<p> <s…\n# ℹ more rows\n# ℹ 4 more variables: DataSubmitterName <chr>, DataSubmitterEmail <chr>,\n#   DateSubmitted <chr>, PI_Notes <chr>\n```\n\n\n:::\n\n```{.r .cell-code}\nSubjects\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# Source:   table<`Subjects`> [?? x 11]\n# Database: mysql  [waiuser@scidb.smith.edu:3306/wai]\n   Identifier  SubjectNumber SessionTotal AgeFirstMeasurement\n   <chr>               <int>        <int>               <dbl>\n 1 Abur_2014               1            7            20      \n 2 Abur_2014               3            8            19      \n 3 Abur_2014               4            7            21      \n 4 Abur_2014               6            8            21      \n 5 Abur_2014               7            5            20      \n 6 Abur_2014               8            5            19      \n 7 Abur_2014              10            5            19      \n 8 Aithal_2013             1            1            NA      \n 9 Aithal_2013             2            1             0.00744\n10 Aithal_2013             3            1            NA      \n# ℹ more rows\n# ℹ 7 more variables: AgeCategoryFirstMeasurement <chr>, Sex <chr>, Race <chr>,\n#   Ethnicity <chr>, LeftEarStatusFirstMeasurement <chr>,\n#   RightEarStatusFirstMeasurement <chr>, SubjectNotes <chr>\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndbListTables(con_wai)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Codebook\"             \"Measurements\"         \"Measurements_pre2020\"\n[4] \"PI_Info\"              \"PI_Info_OLD\"          \"Subjects\"            \n[7] \"Subjects_pre2020\"    \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.sql .cell-code}\nSHOW TABLES;\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: 7 records\n\n|Tables_in_wai        |\n|:--------------------|\n|Codebook             |\n|Measurements         |\n|Measurements_pre2020 |\n|PI_Info              |\n|PI_Info_OLD          |\n|Subjects             |\n|Subjects_pre2020     |\n\n</div>\n:::\n\n::: {.cell}\n\n```{.sql .cell-code}\nDESCRIBE Measurements;\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n|Field         |Type        |Null |Key |Default |Extra |\n|:-------------|:-----------|:----|:---|:-------|:-----|\n|Identifier    |varchar(50) |NO   |PRI |NA      |      |\n|SubjectNumber |int         |NO   |PRI |NA      |      |\n|Session       |int         |NO   |PRI |NA      |      |\n|Ear           |varchar(50) |NO   |PRI |        |      |\n|Instrument    |varchar(50) |NO   |PRI |        |      |\n|Age           |float       |YES  |    |NA      |      |\n|AgeCategory   |varchar(50) |YES  |    |NA      |      |\n|EarStatus     |varchar(50) |YES  |    |NA      |      |\n|TPP           |float       |YES  |    |NA      |      |\n|AreaCanal     |float       |YES  |    |NA      |      |\n\n</div>\n:::\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT *\nFROM Measurements\nLIMIT 0, 5;\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: 5 records\n\n|Identifier | SubjectNumber| Session|Ear  |Instrument | Age|AgeCategory |EarStatus | TPP| AreaCanal| PressureCanal|SweepDirection | Frequency| Absorbance|      Zmag|      Zang|\n|:----------|-------------:|-------:|:----|:----------|---:|:-----------|:---------|---:|---------:|-------------:|:--------------|---------:|----------:|---------:|---------:|\n|Abur_2014  |             1|       1|Left |HearID     |  20|Adult       |Normal    |  -5|  4.42e-05|             0|Ambient        |   210.938|  0.0333379| 113780000| -0.233504|\n|Abur_2014  |             1|       1|Left |HearID     |  20|Adult       |Normal    |  -5|  4.42e-05|             0|Ambient        |   234.375|  0.0315705| 103585000| -0.235778|\n|Abur_2014  |             1|       1|Left |HearID     |  20|Adult       |Normal    |  -5|  4.42e-05|             0|Ambient        |   257.812|  0.0405751|  92951696| -0.233482|\n|Abur_2014  |             1|       1|Left |HearID     |  20|Adult       |Normal    |  -5|  4.42e-05|             0|Ambient        |   281.250|  0.0438399|  86058000| -0.233421|\n|Abur_2014  |             1|       1|Left |HearID     |  20|Adult       |Normal    |  -5|  4.42e-05|             0|Ambient        |   304.688|  0.0486400|  79492800| -0.232931|\n\n</div>\n:::\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT \n  Measurements.Identifier,\n  COUNT(DISTINCT CONCAT(Measurements.SubjectNumber, Measurements.Ear)) AS Unique_Ears,\n  PI_Info.AuthorsShortList,\n  Measurements.Instrument,\n  Measurements.Frequency,\n  AVG(Measurements.Absorbance) AS MeanAbsorbance,\n  CONCAT(PI_Info.AuthorsShortList, ' et al. N=', \n         COUNT(DISTINCT CONCAT(Measurements.SubjectNumber, Measurements.Ear)), ', ', Measurements.Instrument) AS LegendLabel\nFROM Measurements\nJOIN PI_Info ON Measurements.Identifier = PI_Info.Identifier\nWHERE Measurements.Identifier IN ('Abur_2014', 'Feeney_207', 'Groon_2015', 'Lewis_2015', 'Liu_2008', 'Rosowski_2012', 'Shahnaz_2006', 'Shaver_2013', 'Sun_2016', 'Voss_1994', 'Voss_2010', 'Werner_2010')\nGROUP BY Measurements.Identifier, Measurements.Instrument, PI_Info.AuthorsShortList, Measurements.Frequency;\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n|Identifier | Unique_Ears|AuthorsShortList |Instrument | Frequency| MeanAbsorbance|LegendLabel                     |\n|:----------|-----------:|:----------------|:----------|---------:|--------------:|:-------------------------------|\n|Abur_2014  |          14|Abur et al.      |HearID     |   210.938|      0.0784746|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   234.375|      0.0826420|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   257.812|      0.0948482|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   281.250|      0.1031472|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   304.688|      0.1137576|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   328.125|      0.1221205|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   351.562|      0.1334329|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   375.000|      0.1447725|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   398.438|      0.1563874|Abur et al. et al. N=14, HearID |\n|Abur_2014  |          14|Abur et al.      |HearID     |   421.875|      0.1806973|Abur et al. et al. N=14, HearID |\n\n</div>\n:::\n\n::: {.cell output.var='data'}\n\n```{.sql .cell-code}\nSELECT \n  Measurements.Identifier,\n  COUNT(DISTINCT CONCAT(Measurements.SubjectNumber, Measurements.Ear)) AS Unique_Ears,\n  PI_Info.AuthorsShortList,\n  Measurements.Instrument,\n  Measurements.Frequency,\n  AVG(Measurements.Absorbance) AS MeanAbsorbance,\n  CONCAT(PI_Info.AuthorsShortList, ' et al. N=', \n         COUNT(DISTINCT CONCAT(Measurements.SubjectNumber, Measurements.Ear)), ', ', Measurements.Instrument) AS LegendLabel\nFROM Measurements\nJOIN PI_Info ON Measurements.Identifier = PI_Info.Identifier\nWHERE Measurements.Identifier IN ('Abur_2014', 'Feeney_207', 'Groon_2015', 'Lewis_2015', 'Liu_2008', 'Rosowski_2012', 'Shahnaz_2006', 'Shaver_2013', 'Sun_2016', 'Voss_1994', 'Voss_2010', 'Werner_2010')\nGROUP BY Measurements.Identifier, Measurements.Instrument, PI_Info.AuthorsShortList, Measurements.Frequency;\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata$Frequency <- as.numeric(data$Frequency)\ndata <- data |>\n  filter(Frequency >= 200)\n\nggplot(data, aes(x = Frequency, y = MeanAbsorbance, color = LegendLabel)) +\n  geom_line(size = 0.8) +\n  labs(\n    title = \"Mean absorbance from each publication in WAI database\",\n    x = \"Frequency (Hz)\",\n    y = \"Mean Absorbance\",\n    color = NULL\n  ) +\n  theme_minimal() +\n  scale_x_continuous(\n    trans = \"log10\",\n    breaks = c(200, 400, 600, 800, 1000, 2000, 4000, 6000, 8000),\n    labels = c(\"200\", \"400\", \"600\", \"800\", \"1000\", \"2000\", \"4000\", \"6000\", \"8000\"),\n    limits = c(200, 8000)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 1),\n    expand = c(0, 0)\n  ) +\n  theme(\n    legend.position = \"right\",\n    legend.text = element_text(size = 8), \n    plot.title = element_text(hjust = 0.5)\n  )\n```\n\n::: {.cell-output-display}\n![](MiniProject4_files/figure-html/unnamed-chunk-8-1.png){width=768}\n:::\n:::\n\n\nThis plot shows the mean absorbance at various frequencies for multiple studies in the WAI database. Each line represents a study, and the legend provides detailed information about the study, including the author, number of unique ears included (N), and the instrument used. The x-axis is scaled logarithmically to reflect the wide range of tested frequencies, while the y-axis displays mean absorbance, ranging from 0 to 1. This plot allows for a comparison of absorbance patterns across studies, highlighting similarities and subtle differences in how absorbance varies with frequency. The visualisation looks identical to the graph found online. Although I tried my best to recreate the legend to be exactly the same as online, this was as close as I could get. \n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT \n  Subjects.Sex, \n  Measurements.Frequency, \n  AVG(Measurements.Absorbance) AS MeanAbsorbance\nFROM Measurements\nJOIN Subjects ON Measurements.SubjectNumber = Subjects.SubjectNumber\nWHERE Measurements.Identifier = 'Abur_2014'\nGROUP BY Subjects.Sex, Measurements.Frequency;\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n|Sex    | Frequency| MeanAbsorbance|\n|:------|---------:|--------------:|\n|Female |   210.938|      0.0795249|\n|Female |   234.375|      0.0837334|\n|Female |   257.812|      0.0958535|\n|Female |   281.250|      0.1042761|\n|Female |   304.688|      0.1148410|\n|Female |   328.125|      0.1233041|\n|Female |   351.562|      0.1344986|\n|Female |   375.000|      0.1458314|\n|Female |   398.438|      0.1573792|\n|Female |   421.875|      0.1814149|\n\n</div>\n:::\n\n::: {.cell output.var='second_data'}\n\n```{.sql .cell-code}\nSELECT \n  Subjects.Sex, \n  Measurements.Frequency, \n  AVG(Measurements.Absorbance) AS MeanAbsorbance\nFROM Measurements\nJOIN Subjects ON Measurements.SubjectNumber = Subjects.SubjectNumber\nWHERE Measurements.Identifier = 'Abur_2014'\nGROUP BY Subjects.Sex, Measurements.Frequency;\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(second_data, aes(x = Frequency, y = MeanAbsorbance, color = Sex)) +\n  geom_line(size = 1) +\n  labs(\n    title = \"Frequency vs. Mean Absorbance by Sex (Abur_2014)\",\n    x = \"Frequency (Hz)\",\n    y = \"Mean Absorbance\",\n    color = \"Sex\"\n  ) +\n  theme_minimal() +\n  scale_x_continuous(\n    trans = \"log10\",\n    breaks = c(200, 400, 600, 800, 1000, 2000, 4000, 6000, 8000),\n    labels = c(\"200\", \"400\", \"600\", \"800\", \"1000\", \"2000\", \"4000\", \"6000\", \"8000\"),\n    limits = c(200, 8000)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 1),\n    expand = c(0, 0)\n  ) +\n  theme(\n    legend.position = \"right\",\n    plot.title = element_text(hjust = 0.5)\n  )\n```\n\n::: {.cell-output-display}\n![](MiniProject4_files/figure-html/unnamed-chunk-11-1.png){width=768}\n:::\n:::\n\nThis plot focuses on the Abur_2014 study and compares mean absorbance across frequencies for people who identify as males, females or unknown sexes. Three distinct lines represent the groups, with each point indicating the mean absorbance for a specific frequency. The x-axis is scaled logarithmically, and the y-axis shows absorbance values. The plot reveals that the patterns in mean absorbance by men and women across Abur's 2014 study are very similar. The line that strays from the common relationship is the data recording people where their sex was unkown. This could be due to far fewer data points, and thus a mean that is more likely to deviate from the population mean. \n\nIn this project, I recreated a plot showing mean absorbance versus frequency for multiple studies in the WAI database, enriching the legend with information about the number of unique ears and instruments used in each study. The plot highlights the similarities and differences in absorbance patterns across studies while maintaining consistent formatting with prior work.\n\nAdditionally, I analyzed data from the Abur_2014 study to explore differences in mean absorbance between males, females and people with an unknown sex. By plotting frequency versus mean absorbance for each group, there was seemingly no difference between womens' and mens' mean absorbance along the different frequencies. \n",
    "supporting": [
      "MiniProject4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}